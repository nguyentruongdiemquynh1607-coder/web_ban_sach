{"ast":null,"code":"/* eslint-disable @typescript-eslint/ban-ts-comment */\nimport { isValidDomain } from './webauthn';\n/**\r\n * A custom Error used to return a more nuanced error detailing _why_ one of the eight documented\r\n * errors in the spec was raised after calling `navigator.credentials.create()` or\r\n * `navigator.credentials.get()`:\r\n *\r\n * - `AbortError`\r\n * - `ConstraintError`\r\n * - `InvalidStateError`\r\n * - `NotAllowedError`\r\n * - `NotSupportedError`\r\n * - `SecurityError`\r\n * - `TypeError`\r\n * - `UnknownError`\r\n *\r\n * Error messages were determined through investigation of the spec to determine under which\r\n * scenarios a given error would be raised.\r\n */\nexport class WebAuthnError extends Error {\n  constructor(_ref) {\n    let {\n      message,\n      code,\n      cause,\n      name\n    } = _ref;\n    var _a;\n    // @ts-ignore: help Rollup understand that `cause` is okay to set\n    super(message, {\n      cause\n    });\n    this.__isWebAuthnError = true;\n    this.name = (_a = name !== null && name !== void 0 ? name : cause instanceof Error ? cause.name : undefined) !== null && _a !== void 0 ? _a : 'Unknown Error';\n    this.code = code;\n  }\n}\n/**\r\n * Error class for unknown WebAuthn errors.\r\n * Wraps unexpected errors that don't match known WebAuthn error conditions.\r\n */\nexport class WebAuthnUnknownError extends WebAuthnError {\n  constructor(message, originalError) {\n    super({\n      code: 'ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY',\n      cause: originalError,\n      message\n    });\n    this.name = 'WebAuthnUnknownError';\n    this.originalError = originalError;\n  }\n}\n/**\r\n * Type guard to check if an error is a WebAuthnError.\r\n * @param {unknown} error - The error to check\r\n * @returns {boolean} True if the error is a WebAuthnError\r\n */\nexport function isWebAuthnError(error) {\n  return typeof error === 'object' && error !== null && '__isWebAuthnError' in error;\n}\n/**\r\n * Attempt to intuit _why_ an error was raised after calling `navigator.credentials.create()`.\r\n * Maps browser errors to specific WebAuthn error codes for better debugging.\r\n * @param {Object} params - Error identification parameters\r\n * @param {Error} params.error - The error thrown by the browser\r\n * @param {CredentialCreationOptions} params.options - The options passed to credentials.create()\r\n * @returns {WebAuthnError} A WebAuthnError with a specific error code\r\n * @see {@link https://w3c.github.io/webauthn/#sctn-createCredential W3C WebAuthn Spec - Create Credential}\r\n */\nexport function identifyRegistrationError(_ref2) {\n  let {\n    error,\n    options\n  } = _ref2;\n  var _a, _b, _c;\n  const {\n    publicKey\n  } = options;\n  if (!publicKey) {\n    throw Error('options was missing required publicKey property');\n  }\n  if (error.name === 'AbortError') {\n    if (options.signal instanceof AbortSignal) {\n      // https://www.w3.org/TR/webauthn-2/#sctn-createCredential (Step 16)\n      return new WebAuthnError({\n        message: 'Registration ceremony was sent an abort signal',\n        code: 'ERROR_CEREMONY_ABORTED',\n        cause: error\n      });\n    }\n  } else if (error.name === 'ConstraintError') {\n    if (((_a = publicKey.authenticatorSelection) === null || _a === void 0 ? void 0 : _a.requireResidentKey) === true) {\n      // https://www.w3.org/TR/webauthn-2/#sctn-op-make-cred (Step 4)\n      return new WebAuthnError({\n        message: 'Discoverable credentials were required but no available authenticator supported it',\n        code: 'ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT',\n        cause: error\n      });\n    } else if (\n    // @ts-ignore: `mediation` doesn't yet exist on CredentialCreationOptions but it's possible as of Sept 2024\n    options.mediation === 'conditional' && ((_b = publicKey.authenticatorSelection) === null || _b === void 0 ? void 0 : _b.userVerification) === 'required') {\n      // https://w3c.github.io/webauthn/#sctn-createCredential (Step 22.4)\n      return new WebAuthnError({\n        message: 'User verification was required during automatic registration but it could not be performed',\n        code: 'ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE',\n        cause: error\n      });\n    } else if (((_c = publicKey.authenticatorSelection) === null || _c === void 0 ? void 0 : _c.userVerification) === 'required') {\n      // https://www.w3.org/TR/webauthn-2/#sctn-op-make-cred (Step 5)\n      return new WebAuthnError({\n        message: 'User verification was required but no available authenticator supported it',\n        code: 'ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT',\n        cause: error\n      });\n    }\n  } else if (error.name === 'InvalidStateError') {\n    // https://www.w3.org/TR/webauthn-2/#sctn-createCredential (Step 20)\n    // https://www.w3.org/TR/webauthn-2/#sctn-op-make-cred (Step 3)\n    return new WebAuthnError({\n      message: 'The authenticator was previously registered',\n      code: 'ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED',\n      cause: error\n    });\n  } else if (error.name === 'NotAllowedError') {\n    /**\r\n     * Pass the error directly through. Platforms are overloading this error beyond what the spec\r\n     * defines and we don't want to overwrite potentially useful error messages.\r\n     */\n    return new WebAuthnError({\n      message: error.message,\n      code: 'ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY',\n      cause: error\n    });\n  } else if (error.name === 'NotSupportedError') {\n    const validPubKeyCredParams = publicKey.pubKeyCredParams.filter(param => param.type === 'public-key');\n    if (validPubKeyCredParams.length === 0) {\n      // https://www.w3.org/TR/webauthn-2/#sctn-createCredential (Step 10)\n      return new WebAuthnError({\n        message: 'No entry in pubKeyCredParams was of type \"public-key\"',\n        code: 'ERROR_MALFORMED_PUBKEYCREDPARAMS',\n        cause: error\n      });\n    }\n    // https://www.w3.org/TR/webauthn-2/#sctn-op-make-cred (Step 2)\n    return new WebAuthnError({\n      message: 'No available authenticator supported any of the specified pubKeyCredParams algorithms',\n      code: 'ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG',\n      cause: error\n    });\n  } else if (error.name === 'SecurityError') {\n    const effectiveDomain = window.location.hostname;\n    if (!isValidDomain(effectiveDomain)) {\n      // https://www.w3.org/TR/webauthn-2/#sctn-createCredential (Step 7)\n      return new WebAuthnError({\n        message: \"\".concat(window.location.hostname, \" is an invalid domain\"),\n        code: 'ERROR_INVALID_DOMAIN',\n        cause: error\n      });\n    } else if (publicKey.rp.id !== effectiveDomain) {\n      // https://www.w3.org/TR/webauthn-2/#sctn-createCredential (Step 8)\n      return new WebAuthnError({\n        message: \"The RP ID \\\"\".concat(publicKey.rp.id, \"\\\" is invalid for this domain\"),\n        code: 'ERROR_INVALID_RP_ID',\n        cause: error\n      });\n    }\n  } else if (error.name === 'TypeError') {\n    if (publicKey.user.id.byteLength < 1 || publicKey.user.id.byteLength > 64) {\n      // https://www.w3.org/TR/webauthn-2/#sctn-createCredential (Step 5)\n      return new WebAuthnError({\n        message: 'User ID was not between 1 and 64 characters',\n        code: 'ERROR_INVALID_USER_ID_LENGTH',\n        cause: error\n      });\n    }\n  } else if (error.name === 'UnknownError') {\n    // https://www.w3.org/TR/webauthn-2/#sctn-op-make-cred (Step 1)\n    // https://www.w3.org/TR/webauthn-2/#sctn-op-make-cred (Step 8)\n    return new WebAuthnError({\n      message: 'The authenticator was unable to process the specified options, or could not create a new credential',\n      code: 'ERROR_AUTHENTICATOR_GENERAL_ERROR',\n      cause: error\n    });\n  }\n  return new WebAuthnError({\n    message: 'a Non-Webauthn related error has occurred',\n    code: 'ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY',\n    cause: error\n  });\n}\n/**\r\n * Attempt to intuit _why_ an error was raised after calling `navigator.credentials.get()`.\r\n * Maps browser errors to specific WebAuthn error codes for better debugging.\r\n * @param {Object} params - Error identification parameters\r\n * @param {Error} params.error - The error thrown by the browser\r\n * @param {CredentialRequestOptions} params.options - The options passed to credentials.get()\r\n * @returns {WebAuthnError} A WebAuthnError with a specific error code\r\n * @see {@link https://w3c.github.io/webauthn/#sctn-getAssertion W3C WebAuthn Spec - Get Assertion}\r\n */\nexport function identifyAuthenticationError(_ref3) {\n  let {\n    error,\n    options\n  } = _ref3;\n  const {\n    publicKey\n  } = options;\n  if (!publicKey) {\n    throw Error('options was missing required publicKey property');\n  }\n  if (error.name === 'AbortError') {\n    if (options.signal instanceof AbortSignal) {\n      // https://www.w3.org/TR/webauthn-2/#sctn-createCredential (Step 16)\n      return new WebAuthnError({\n        message: 'Authentication ceremony was sent an abort signal',\n        code: 'ERROR_CEREMONY_ABORTED',\n        cause: error\n      });\n    }\n  } else if (error.name === 'NotAllowedError') {\n    /**\r\n     * Pass the error directly through. Platforms are overloading this error beyond what the spec\r\n     * defines and we don't want to overwrite potentially useful error messages.\r\n     */\n    return new WebAuthnError({\n      message: error.message,\n      code: 'ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY',\n      cause: error\n    });\n  } else if (error.name === 'SecurityError') {\n    const effectiveDomain = window.location.hostname;\n    if (!isValidDomain(effectiveDomain)) {\n      // https://www.w3.org/TR/webauthn-2/#sctn-discover-from-external-source (Step 5)\n      return new WebAuthnError({\n        message: \"\".concat(window.location.hostname, \" is an invalid domain\"),\n        code: 'ERROR_INVALID_DOMAIN',\n        cause: error\n      });\n    } else if (publicKey.rpId !== effectiveDomain) {\n      // https://www.w3.org/TR/webauthn-2/#sctn-discover-from-external-source (Step 6)\n      return new WebAuthnError({\n        message: \"The RP ID \\\"\".concat(publicKey.rpId, \"\\\" is invalid for this domain\"),\n        code: 'ERROR_INVALID_RP_ID',\n        cause: error\n      });\n    }\n  } else if (error.name === 'UnknownError') {\n    // https://www.w3.org/TR/webauthn-2/#sctn-op-get-assertion (Step 1)\n    // https://www.w3.org/TR/webauthn-2/#sctn-op-get-assertion (Step 12)\n    return new WebAuthnError({\n      message: 'The authenticator was unable to process the specified options, or could not create a new assertion signature',\n      code: 'ERROR_AUTHENTICATOR_GENERAL_ERROR',\n      cause: error\n    });\n  }\n  return new WebAuthnError({\n    message: 'a Non-Webauthn related error has occurred',\n    code: 'ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY',\n    cause: error\n  });\n}","map":{"version":3,"names":["isValidDomain","WebAuthnError","Error","constructor","_ref","message","code","cause","name","__isWebAuthnError","_a","undefined","WebAuthnUnknownError","originalError","isWebAuthnError","error","identifyRegistrationError","_ref2","options","publicKey","signal","AbortSignal","authenticatorSelection","requireResidentKey","mediation","_b","userVerification","_c","validPubKeyCredParams","pubKeyCredParams","filter","param","type","length","effectiveDomain","window","location","hostname","concat","rp","id","user","byteLength","identifyAuthenticationError","_ref3","rpId"],"sources":["C:\\Users\\bread\\Downloads\\html\\web_ban_sach\\node_modules\\@supabase\\auth-js\\src\\lib\\webauthn.errors.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/ban-ts-comment */\r\n\r\nimport { StrictOmit } from './types'\r\nimport { isValidDomain } from './webauthn'\r\nimport {\r\n  PublicKeyCredentialCreationOptionsFuture,\r\n  PublicKeyCredentialRequestOptionsFuture,\r\n} from './webauthn.dom'\r\n\r\n/**\r\n * A custom Error used to return a more nuanced error detailing _why_ one of the eight documented\r\n * errors in the spec was raised after calling `navigator.credentials.create()` or\r\n * `navigator.credentials.get()`:\r\n *\r\n * - `AbortError`\r\n * - `ConstraintError`\r\n * - `InvalidStateError`\r\n * - `NotAllowedError`\r\n * - `NotSupportedError`\r\n * - `SecurityError`\r\n * - `TypeError`\r\n * - `UnknownError`\r\n *\r\n * Error messages were determined through investigation of the spec to determine under which\r\n * scenarios a given error would be raised.\r\n */\r\nexport class WebAuthnError extends Error {\r\n  code: WebAuthnErrorCode\r\n\r\n  protected __isWebAuthnError = true\r\n\r\n  constructor({\r\n    message,\r\n    code,\r\n    cause,\r\n    name,\r\n  }: {\r\n    message: string\r\n    code: WebAuthnErrorCode\r\n    cause?: Error | unknown\r\n    name?: string\r\n  }) {\r\n    // @ts-ignore: help Rollup understand that `cause` is okay to set\r\n    super(message, { cause })\r\n    this.name = name ?? (cause instanceof Error ? cause.name : undefined) ?? 'Unknown Error'\r\n    this.code = code\r\n  }\r\n}\r\n\r\n/**\r\n * Error class for unknown WebAuthn errors.\r\n * Wraps unexpected errors that don't match known WebAuthn error conditions.\r\n */\r\nexport class WebAuthnUnknownError extends WebAuthnError {\r\n  originalError: unknown\r\n\r\n  constructor(message: string, originalError: unknown) {\r\n    super({\r\n      code: 'ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY',\r\n      cause: originalError,\r\n      message,\r\n    })\r\n    this.name = 'WebAuthnUnknownError'\r\n    this.originalError = originalError\r\n  }\r\n}\r\n\r\n/**\r\n * Type guard to check if an error is a WebAuthnError.\r\n * @param {unknown} error - The error to check\r\n * @returns {boolean} True if the error is a WebAuthnError\r\n */\r\nexport function isWebAuthnError(error: unknown): error is WebAuthnError {\r\n  return typeof error === 'object' && error !== null && '__isWebAuthnError' in error\r\n}\r\n\r\n/**\r\n * Error codes for WebAuthn operations.\r\n * These codes provide specific information about why a WebAuthn ceremony failed.\r\n * @see {@link https://w3c.github.io/webauthn/#sctn-defined-errors W3C WebAuthn Spec - Defined Errors}\r\n */\r\nexport type WebAuthnErrorCode =\r\n  | 'ERROR_CEREMONY_ABORTED'\r\n  | 'ERROR_INVALID_DOMAIN'\r\n  | 'ERROR_INVALID_RP_ID'\r\n  | 'ERROR_INVALID_USER_ID_LENGTH'\r\n  | 'ERROR_MALFORMED_PUBKEYCREDPARAMS'\r\n  | 'ERROR_AUTHENTICATOR_GENERAL_ERROR'\r\n  | 'ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT'\r\n  | 'ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT'\r\n  | 'ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED'\r\n  | 'ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG'\r\n  | 'ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE'\r\n  | 'ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY'\r\n\r\n/**\r\n * Attempt to intuit _why_ an error was raised after calling `navigator.credentials.create()`.\r\n * Maps browser errors to specific WebAuthn error codes for better debugging.\r\n * @param {Object} params - Error identification parameters\r\n * @param {Error} params.error - The error thrown by the browser\r\n * @param {CredentialCreationOptions} params.options - The options passed to credentials.create()\r\n * @returns {WebAuthnError} A WebAuthnError with a specific error code\r\n * @see {@link https://w3c.github.io/webauthn/#sctn-createCredential W3C WebAuthn Spec - Create Credential}\r\n */\r\nexport function identifyRegistrationError({\r\n  error,\r\n  options,\r\n}: {\r\n  error: Error\r\n  options: StrictOmit<CredentialCreationOptions, 'publicKey'> & {\r\n    publicKey: PublicKeyCredentialCreationOptionsFuture\r\n  }\r\n}): WebAuthnError {\r\n  const { publicKey } = options\r\n\r\n  if (!publicKey) {\r\n    throw Error('options was missing required publicKey property')\r\n  }\r\n\r\n  if (error.name === 'AbortError') {\r\n    if (options.signal instanceof AbortSignal) {\r\n      // https://www.w3.org/TR/webauthn-2/#sctn-createCredential (Step 16)\r\n      return new WebAuthnError({\r\n        message: 'Registration ceremony was sent an abort signal',\r\n        code: 'ERROR_CEREMONY_ABORTED',\r\n        cause: error,\r\n      })\r\n    }\r\n  } else if (error.name === 'ConstraintError') {\r\n    if (publicKey.authenticatorSelection?.requireResidentKey === true) {\r\n      // https://www.w3.org/TR/webauthn-2/#sctn-op-make-cred (Step 4)\r\n      return new WebAuthnError({\r\n        message:\r\n          'Discoverable credentials were required but no available authenticator supported it',\r\n        code: 'ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT',\r\n        cause: error,\r\n      })\r\n    } else if (\r\n      // @ts-ignore: `mediation` doesn't yet exist on CredentialCreationOptions but it's possible as of Sept 2024\r\n      options.mediation === 'conditional' &&\r\n      publicKey.authenticatorSelection?.userVerification === 'required'\r\n    ) {\r\n      // https://w3c.github.io/webauthn/#sctn-createCredential (Step 22.4)\r\n      return new WebAuthnError({\r\n        message:\r\n          'User verification was required during automatic registration but it could not be performed',\r\n        code: 'ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE',\r\n        cause: error,\r\n      })\r\n    } else if (publicKey.authenticatorSelection?.userVerification === 'required') {\r\n      // https://www.w3.org/TR/webauthn-2/#sctn-op-make-cred (Step 5)\r\n      return new WebAuthnError({\r\n        message: 'User verification was required but no available authenticator supported it',\r\n        code: 'ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT',\r\n        cause: error,\r\n      })\r\n    }\r\n  } else if (error.name === 'InvalidStateError') {\r\n    // https://www.w3.org/TR/webauthn-2/#sctn-createCredential (Step 20)\r\n    // https://www.w3.org/TR/webauthn-2/#sctn-op-make-cred (Step 3)\r\n    return new WebAuthnError({\r\n      message: 'The authenticator was previously registered',\r\n      code: 'ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED',\r\n      cause: error,\r\n    })\r\n  } else if (error.name === 'NotAllowedError') {\r\n    /**\r\n     * Pass the error directly through. Platforms are overloading this error beyond what the spec\r\n     * defines and we don't want to overwrite potentially useful error messages.\r\n     */\r\n    return new WebAuthnError({\r\n      message: error.message,\r\n      code: 'ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY',\r\n      cause: error,\r\n    })\r\n  } else if (error.name === 'NotSupportedError') {\r\n    const validPubKeyCredParams = publicKey.pubKeyCredParams.filter(\r\n      (param) => param.type === 'public-key'\r\n    )\r\n\r\n    if (validPubKeyCredParams.length === 0) {\r\n      // https://www.w3.org/TR/webauthn-2/#sctn-createCredential (Step 10)\r\n      return new WebAuthnError({\r\n        message: 'No entry in pubKeyCredParams was of type \"public-key\"',\r\n        code: 'ERROR_MALFORMED_PUBKEYCREDPARAMS',\r\n        cause: error,\r\n      })\r\n    }\r\n\r\n    // https://www.w3.org/TR/webauthn-2/#sctn-op-make-cred (Step 2)\r\n    return new WebAuthnError({\r\n      message:\r\n        'No available authenticator supported any of the specified pubKeyCredParams algorithms',\r\n      code: 'ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG',\r\n      cause: error,\r\n    })\r\n  } else if (error.name === 'SecurityError') {\r\n    const effectiveDomain = window.location.hostname\r\n    if (!isValidDomain(effectiveDomain)) {\r\n      // https://www.w3.org/TR/webauthn-2/#sctn-createCredential (Step 7)\r\n      return new WebAuthnError({\r\n        message: `${window.location.hostname} is an invalid domain`,\r\n        code: 'ERROR_INVALID_DOMAIN',\r\n        cause: error,\r\n      })\r\n    } else if (publicKey.rp.id !== effectiveDomain) {\r\n      // https://www.w3.org/TR/webauthn-2/#sctn-createCredential (Step 8)\r\n      return new WebAuthnError({\r\n        message: `The RP ID \"${publicKey.rp.id}\" is invalid for this domain`,\r\n        code: 'ERROR_INVALID_RP_ID',\r\n        cause: error,\r\n      })\r\n    }\r\n  } else if (error.name === 'TypeError') {\r\n    if (publicKey.user.id.byteLength < 1 || publicKey.user.id.byteLength > 64) {\r\n      // https://www.w3.org/TR/webauthn-2/#sctn-createCredential (Step 5)\r\n      return new WebAuthnError({\r\n        message: 'User ID was not between 1 and 64 characters',\r\n        code: 'ERROR_INVALID_USER_ID_LENGTH',\r\n        cause: error,\r\n      })\r\n    }\r\n  } else if (error.name === 'UnknownError') {\r\n    // https://www.w3.org/TR/webauthn-2/#sctn-op-make-cred (Step 1)\r\n    // https://www.w3.org/TR/webauthn-2/#sctn-op-make-cred (Step 8)\r\n    return new WebAuthnError({\r\n      message:\r\n        'The authenticator was unable to process the specified options, or could not create a new credential',\r\n      code: 'ERROR_AUTHENTICATOR_GENERAL_ERROR',\r\n      cause: error,\r\n    })\r\n  }\r\n\r\n  return new WebAuthnError({\r\n    message: 'a Non-Webauthn related error has occurred',\r\n    code: 'ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY',\r\n    cause: error,\r\n  })\r\n}\r\n\r\n/**\r\n * Attempt to intuit _why_ an error was raised after calling `navigator.credentials.get()`.\r\n * Maps browser errors to specific WebAuthn error codes for better debugging.\r\n * @param {Object} params - Error identification parameters\r\n * @param {Error} params.error - The error thrown by the browser\r\n * @param {CredentialRequestOptions} params.options - The options passed to credentials.get()\r\n * @returns {WebAuthnError} A WebAuthnError with a specific error code\r\n * @see {@link https://w3c.github.io/webauthn/#sctn-getAssertion W3C WebAuthn Spec - Get Assertion}\r\n */\r\nexport function identifyAuthenticationError({\r\n  error,\r\n  options,\r\n}: {\r\n  error: Error\r\n  options: StrictOmit<CredentialRequestOptions, 'publicKey'> & {\r\n    publicKey: PublicKeyCredentialRequestOptionsFuture\r\n  }\r\n}): WebAuthnError {\r\n  const { publicKey } = options\r\n\r\n  if (!publicKey) {\r\n    throw Error('options was missing required publicKey property')\r\n  }\r\n\r\n  if (error.name === 'AbortError') {\r\n    if (options.signal instanceof AbortSignal) {\r\n      // https://www.w3.org/TR/webauthn-2/#sctn-createCredential (Step 16)\r\n      return new WebAuthnError({\r\n        message: 'Authentication ceremony was sent an abort signal',\r\n        code: 'ERROR_CEREMONY_ABORTED',\r\n        cause: error,\r\n      })\r\n    }\r\n  } else if (error.name === 'NotAllowedError') {\r\n    /**\r\n     * Pass the error directly through. Platforms are overloading this error beyond what the spec\r\n     * defines and we don't want to overwrite potentially useful error messages.\r\n     */\r\n    return new WebAuthnError({\r\n      message: error.message,\r\n      code: 'ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY',\r\n      cause: error,\r\n    })\r\n  } else if (error.name === 'SecurityError') {\r\n    const effectiveDomain = window.location.hostname\r\n    if (!isValidDomain(effectiveDomain)) {\r\n      // https://www.w3.org/TR/webauthn-2/#sctn-discover-from-external-source (Step 5)\r\n      return new WebAuthnError({\r\n        message: `${window.location.hostname} is an invalid domain`,\r\n        code: 'ERROR_INVALID_DOMAIN',\r\n        cause: error,\r\n      })\r\n    } else if (publicKey.rpId !== effectiveDomain) {\r\n      // https://www.w3.org/TR/webauthn-2/#sctn-discover-from-external-source (Step 6)\r\n      return new WebAuthnError({\r\n        message: `The RP ID \"${publicKey.rpId}\" is invalid for this domain`,\r\n        code: 'ERROR_INVALID_RP_ID',\r\n        cause: error,\r\n      })\r\n    }\r\n  } else if (error.name === 'UnknownError') {\r\n    // https://www.w3.org/TR/webauthn-2/#sctn-op-get-assertion (Step 1)\r\n    // https://www.w3.org/TR/webauthn-2/#sctn-op-get-assertion (Step 12)\r\n    return new WebAuthnError({\r\n      message:\r\n        'The authenticator was unable to process the specified options, or could not create a new assertion signature',\r\n      code: 'ERROR_AUTHENTICATOR_GENERAL_ERROR',\r\n      cause: error,\r\n    })\r\n  }\r\n\r\n  return new WebAuthnError({\r\n    message: 'a Non-Webauthn related error has occurred',\r\n    code: 'ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY',\r\n    cause: error,\r\n  })\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}